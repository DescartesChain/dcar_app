<!doctype html>
<html>

	<head>
		<meta charset="UTF-8">
		<title></title>
		<meta name="viewport" content="width=device-width,initial-scale=1,minimum-scale=1,maximum-scale=1,user-scalable=no" />
		<link href="../css/mui.min.css" rel="stylesheet" />
		<link rel="stylesheet" type="text/css" href="../css/iconfont.css" />
		<link rel="stylesheet" type="text/css" href="../css/style.css" />
		<link rel="stylesheet" type="text/css" href="../css/oreManage.css" />
	</head>

	<body>
		<header class="mui-bar mui-bar-nav header">
			<a class="mui-action-back mui-icon mui-icon-left-nav mui-pull-left"></a>
			<h1 class="mui-title">矿机管理</h1>
			<i class="iconfont icon-saoma mui-pull-right saoma_btn newact" url="/users/barcode.html"></i>
		</header>
		<div class="mui-content between">
			<div class="mill_top">
				<p class="first_line">总收益</p>
				<p class="second_line">
					<span id="balance">0</span>
					<span class="first_line">DCAR</span>
				</p>
				<!--<p class="third_line">
					=
					<span id="balanceCNY">0</span>
					CNY
				</p>-->
			</div>
			<div class="miner_list" id="cart_list">
				<!--<div class="miner_box">
					<div class="miner">
						<div class="title">
							<h5 class="name">矿机一</h5>
							<p class="status stay">正在挖矿</p>
						</div>
						<div class="miner_content">
							<ul class="miner_income">
								<li>
									<h6>今日收益（24h）</h6>
									<p>452138.00<span>DCAR</span></p>
								</li>
								<li>
									<h6>算力值（KH/S）</h6>
									<p>452138.00<span>DCAR</span></p>
								</li>
							</ul>
						</div>
						<div class="miner_footer">
							<p class="purse">
								<i class="iconfont icon-qianbao" style="font-size: 16px;"></i> 解绑钱包
							</p class="shut_down open_box" >
							<p class="purse">
								<i class="iconfont icon-xiangqing"></i> 查看详情
							</p>
						</div>
					</div>
					<div class="delete_miner">
						<i class="iconfont icon-shanchu"></i>
						<p>删除</p>
					</div>
				</div>
				<div class="miner_box">-->
					<div class="miner">
						<div class="title">
							<h5 class="name">矿机二</h5>
							<p class="status stop">
								<img src="../img/redPic.png" alt="" />
								停止挖矿
							</p>
						</div>
						<div class="miner_content">
							<img src="../img/ore/11.png" class="not_start_logo"/>
							<p class="not_start_title">您还未绑定钱包，绑定之后矿机将开始挖矿</p>
						</div>
						<div class="miner_footer_two">
							<p class="start_open open_box">
								<i class="iconfont icon-qianbao" style="font-size: 16px;"></i> 绑定钱包
							</p>
						</div>
					</div>
					<div class="delete_miner">
						<i class="iconfont icon-shanchu"></i>
						<p>删除</p>
					</div>
				</div>
			</div>
			<div class="loading_box">
				<button class="loading">加载更多</button>
			</div>
		</div>
		<!--开机关机弹框-->
		<div class="mui-popover alert_box">
			<p class="alert_title">提示</p>
			<div class="alert_body" id="close">确定要关机吗？确定之后矿机将停止挖矿</div>
			<div class="alert_body" id="delete">确定要删除吗？</div>
			<div class="alert_body" id="open">确定要开机吗？确定之后矿机将开始挖矿</div>
			<div class="alert_body" id="deleteWallet">确定要解绑钱包吗？</div>
			<ul class="alert_operate">
				<li class="alert_button" onclick="sureConfirm()">确定</li>
				<li class="alert_button">取消</li>
			</ul>
		</div>
		<!--详情-->
		<div class="mui-popover detail_box">
			<p class="alert_title">详情</p >
			<div class="mill_detail">
				<p class="detail_title">收益 （DCAR/DAY）</p >
				<div class="detail_main" id="seek_deatil_balance" style="padding-bottom: 21px;">999</div>
				<p class="detail_title">矿机地址</p >
				<div class="detail_main" id="seek_deatil_address">ashkdhsdhashkdhsdhkashkdhsdhkashkdhsdhkk</div>
			</div>
			<div class="close_btn" onclick="detailConfirm()">关闭</div>
		</div>
		<!--修改矿机名称-->
		<div class="mui-popover alter_box">
			<p class="alert_title">修改矿机名称</p>
			<div class="alter_main">
				<input type="text" placeholder="请填写修改的矿机名称" id="millName"/>
			</div>
			<ul class="alert_operate">
				<li onclick="sureAlter()">确定</li>
				<li class="alter_button">取消</li>
			</ul>
		</div>
		<script src="../js/mui.min.js"></script>
		<script src="../js/store/dist/store.legacy.min.js" type="text/javascript" charset="utf-8"></script>
		<script src="../js/jquery-2.1.1.min.js" type="text/javascript" charset="utf-8"></script>
		<script src="../js/common.js" type="text/javascript" charset="utf-8"></script>
		<script src="../js/benben.js" type="text/javascript" charset="utf-8"></script>
		<script type="text/javascript">
//			mui.init({
//				pullRefresh: {
//					container: '#pullrefresh',
//					down: {
//						callback: pulldownRefresh
//					},
//					up: {
//						contentrefresh: '正在加载...',
//						callback: pullupRefresh
//					}
//				}
//			});
				/**
			 * 下拉刷新具体业务实现
			 */
//			function pulldownRefresh() {
//				setTimeout(function() {
//					loadmillList(); // 获取矿机列表
//					var table = document.body.querySelector('.mui-table-view');
//					var cells = document.body.querySelectorAll('.mui-table-view-cell');
////					for (var i = cells.length, len = i + 3; i < len; i++) {
////						var li = document.createElement('div');
////						li.className = 'mui-table-view-cell';
////						li.innerHTML = '<a class="mui-navigate-right">Item ' + (i + 1) + '</a>';
////						//下拉刷新，新纪录插到最前面；
////						table.insertBefore(li, table.firstChild);
////					}
//					table.insertBefore(cart_list, table.firstChild);
////					$('#cart_list').html(cart_list);
//					mui('#pullrefresh').pullRefresh().endPulldownToRefresh(); //refresh completed
//				}, 1500);
//			}
//			var count = 0;
//			var cart_list;
			// 滚动end
			var page = 1; //第几页
			var pageSize = 10; // 每页多少条记录，-1 不分页
			loadmillList(); // 获取矿机列表
//			loadStateList(); // 获取矿机状态列表
			var alertState;
			var currentId;
			var stateList = []; //矿机状态列表
			var millList; // 矿机列表
			var balanceTotal = 0; // 收益总和
			var millName;// 矿机名称
			var loadingList = "";
			// 关闭详情
			function detailConfirm(){
				mui('.detail_box').popover('toggle');
			};
			// 确定修改矿机名称
			function sureAlter(){
				mui.showLoading("保存中...", "div");
				// 矿机名称
				millName = $('#millName').val();
				if (millName == '' || millName == undefined) {
					mui.toast('矿机名称不能为空');
					return false;
				};
				$.ajax({
				  type: "put",    // 接口类型
				  url: api + "miners/" + currentId,  // 接口地址
				  data: {
				  	name:millName
				  },  // 参数
				  beforeSend: function(xhr) {
				    xhr.setRequestHeader('x-requested-with', store.get("userInfo").token); // 需要携带的头部
				  },
				  async: true,
				  success: function(ret) {
				    mui.hideLoading();
				    if(ret.success) {
				      mui.toast('保存成功');
				      loadmillList(); // 获取矿机列表
				      mui('.alter_box').popover('hide');
				      $('#millName').val(millName)
				    } else{
				      mui.toast(ret.msg);
				    }
				  },
				  error: function(error) {
				    mui.hideLoading();
				    mui.toast(error.responseJSON.msg);
				  }
				})
			};
			//定时加载
			var timer = null;
			clearInterval(timer);
			timer = setInterval(function(){
			   page = 1;
			   loadmillList(); // 获取矿机列表
//			   loadStateList(); // 获取矿机状态列表
			},60000)
			mui.plusReady(function() {
				$('.loading').html('加载中...');
				// 点击加载更多
				$('.loading_box').on("click",function(){
					if($('.loading').html() == '已加载全部'){
						mui.toast('已加载全部内容');
						return false;
					}
					page ++;
					loadingMore();
					// pageSize = pageSize +4;
					// loadmillList(); // 获取矿机列表
					$('.loading').html('加载中...');
				});
				// 关闭提示框
				$(".alert_button").on("click", function() {
					mui('.alert_box').popover('toggle');
				});
				// 关闭修改名称框
				$(".alter_button").on("click", function() {
					mui('.alter_box').popover('toggle');
				});
				$("#cart_list").on("click", ".purse", function() {
					clearInterval(timer);
					mui.openWindow({
						url: '/users/addOre.html',
						id: '/users/addOre.html',
						extras: {
							minerName: $(this).attr("name"),
							uuid: $(this).attr("uuid")
						},
						waiting: {
							autoShow: false,
						}
					})
			    });
			    // 查看详情
			    $("#cart_list").on("click", ".seek_deatil", function() {
			    	$("#seek_deatil_address").html($(this).attr("address"));
			    	$("#seek_deatil_balance").html($(this).attr("income"));
					mui('.detail_box').popover('toggle');
					currentId = $(this).attr("uuid");
				});
				// 修改矿机名称
			    $("#cart_list").on("click", ".alter_name", function() {
					mui('.alter_box').popover('toggle');
					currentId = $(this).attr("uuid");
					$('#millName').val('');
				});
			    // 开机
			    $("#cart_list").on("click", ".start_open", function() {
					mui('.alert_box').popover('toggle');
					alertState = 'open';
					currentId = $(this).attr("uuid");
					$('#delete').hide();
					$('#close').hide();
					$('#open').show();
					$('#deleteWallet').hide();
				});
				// 关机
			    $("#cart_list").on("click", ".shut_down", function() {
					mui('.alert_box').popover('show');
					alertState = 'close';
					currentId = $(this).attr("uuid");
					$('#delete').hide();
					$('#close').show();
					$('#open').hide();
					$('#deleteWallet').hide();
				});
				// 删除矿机
				$("#cart_list").on("click", ".delete_miner", function() {
					mui('.alert_box').popover('show');
					alertState = 'delete';
					currentId = $(this).attr("uuid");
					$('#delete').show();
					$('#close').hide();
					$('#open').hide();
					$('#deleteWallet').hide();
				}); 
				// 解绑钱包
				$("#cart_list").on("click", ".deleteWallet", function() {
					mui('.alert_box').popover('show');
					alertState = 'deleteWallet';
					currentId = $(this).attr("uuid");
					$('#delete').hide();
					$('#close').hide();
					$('#open').hide();
					$('#deleteWallet').show();
				});
			});
			// 加载更多方法
			function loadingMore() {
				loadingList = '';
				mui.showLoading("加载中...", "div");
				$.ajax({
					type: "get",
					url: api + "miners?page=" + page + '&pageSize=' + pageSize,
					data: {},
					beforeSend: function(xhr) {
						xhr.setRequestHeader('x-requested-with', store.get("userInfo").token);
					},
					async: true,
					success: function(ret) {
						mui.hideLoading();
						if(ret.success) {
							mui.toast('加载成功');
							for(var b =0;b<ret.data.list.length;b++){
						      	balanceTotal += ret.data.list[b].balance;
						    }
							$('#balance').html(balanceTotal);
							$.each(ret.data.list, function(i, t) {
								if (t.status == 5 || t.status == 11){
									loadingList +=
									'<div class="miner_box">' +
										'<div class="miner">' +
											'<div class="title">' +
												'<h5 class="name">' + t.name + '<i class="iconfont icon-xiugai1 alter_name" uuid="'+ t.uuid +'"></i>'+'</h5>' +
												'<p class="status" id="doing">' + 
													'<img src="../img/greenPic.png" alt="" />' +
													'空闲中' +
												'</p>' +
											'</div>' +
											'<div class="miner_content">' + 
											    '<img src="../img/ore/11.png" class="not_start_logo"/>' +
											    '<p class="not_start_title">您还未绑定钱包，绑定之后矿机将开始挖矿</p>' +
											'</div>' +
											'<div class="miner_footer_two">' +
												'<p class="purse" name="'+ t.name +'" uuid="'+ t.uuid +'">' +
													'<i style="left: 34%;" class="iconfont icon-qianbao" style="font-size: 16px;"></i>' + '绑定钱包' +
												'</p>' +
											'</div>' +
										'</div>' +
										'<div class="delete_miner" uuid="'+ t.uuid +'">' +
											'<i class="iconfont icon-shanchu"></i>' +
											'<p>' + '删除' + '</p>'+
										'</div>' +
									'</div>';
								} else if(t.status == 8){
									loadingList +=
									'<div class="miner_box">' +
										'<div class="miner">' +
											'<div class="title">' +
												'<h5 class="name">' + t.name + '<i class="iconfont icon-xiugai1 alter_name" uuid="'+ t.uuid +'"></i>'+'</h5>' +
												'<p class="status" id="doing">' + 
													'<img src="../img/greenPic.png" alt="" />' +
													'挖矿中' +
												'</p>' +
											'</div>' +
											'<div class="miner_content">' +
												'<ul class="miner_income">' +
													'<li>' +
														'<h6>' + '收益（DCAR）' + '</h6>' +
														'<p>' + t.balance + '</p>' +
													'</li>' +
													'<li>' +
														'<h6>' + '算力值（KH/S）' + '</h6>' +
														'<p>' + t.hashrate + '</p>' +
													'</li>' +
												'</ul>'+
											'</div>' +
											'<div class="miner_footer">' +
												'<p class="deleteWallet" uuid="'+ t.uuid +'">' +
													'<i class="iconfont icon-qianbao" style="font-size: 16px;"></i>' + '解绑钱包' +
												'</p>' +
												'<p class="seek_deatil" income="'+ t.balance +'" address="'+ t.address +'" name="'+ t.name +'" uuid="'+ t.uuid +'">' +
													'<i class="iconfont icon-xiangqing"></i>' + '查看详情' +
												'</p>' +
											'</div>' +
										'</div>' +
										'<div class="delete_miner" uuid="'+ t.uuid +'">' +
											'<i class="iconfont icon-shanchu"></i>' +
											'<p>' + '删除' + '</p>'+
										'</div>' +
									'</div>';
								}
							});
							var minerList = document.body.querySelector('#cart_list');
							var Div = document.createElement('div');
							// Div.className = 'mui-table-view-cell';
							Div.innerHTML = loadingList;
							minerList.appendChild(Div);
							if ($(".miner_box").length >= ret.data.count){
								$('.loading').html('已加载全部');
							} else {
								$('.loading').html('加载更多');
							}
						} else {
							mui.toast(ret.msg);
						}
					},
					error: function(error) {
						mui.hideLoading();
						mui.toast(error.responseJSON.msg);
					}
				})
			};
			// 确定 
			function sureConfirm(){
				if (alertState == 'delete') { // 删除矿机
					mui.showLoading("删除中...", "div");
					$.ajax({
						type: "delete",
						url: api + "miners/owner",
						data: {
							uuid: currentId
						},
						beforeSend: function(xhr) {
							xhr.setRequestHeader('x-requested-with', store.get("userInfo").token);
						},
						async: true,
						success: function(ret) {
							mui.hideLoading();
							if(ret.success) {
								mui.toast('删除成功');
								loadmillList(); // 获取矿机状态列表
							} else {
								mui.toast(ret.msg);
							}
						},
						error: function(error) {
							mui.hideLoading();
							mui.toast(error.responseJSON.msg);
						}
					});
					return false;
				}
				if (alertState == 'open') { //启动矿机
					mui.showLoading("启动中...", "div");
					$.ajax({
						type: "get",
						url: api + "miners/" + currentId + '/init',
						data: {},
						beforeSend: function(xhr) {
							xhr.setRequestHeader('x-requested-with', store.get("userInfo").token);
						},
						async: true,
						success: function(ret) {
							mui.hideLoading();
							if(ret.success) {
								mui.toast('启动成功');
								loadmillList(); // 获取矿机状态列表
							} else {
								mui.toast(ret.msg);
							}
						},
						error: function(error) {
							mui.hideLoading();
							mui.toast(error.responseJSON.msg);
						}
					});
					return false;
				}
				if (alertState == 'deleteWallet') { //解绑钱包
					mui.showLoading("删除中...", "div");
					$.ajax({
						type: "delete",
						url: api + "miners/account",
						data: {
							uuid: currentId
						},
						beforeSend: function(xhr) {
							xhr.setRequestHeader('x-requested-with', store.get("userInfo").token);
						},
						async: true,
						success: function(ret) {
							mui.hideLoading();
							if(ret.success) {
								mui.toast('删除成功');
								loadmillList(); // 获取矿机状态列表
							} else {
								mui.toast(ret.msg);
							}
						},
						error: function(error) {
							mui.hideLoading();
							mui.toast(error.responseJSON.msg);
						}
					});
					return false;
				}
				
			}
			var goods = [];
			var cart_list = '';
			// 获取矿机状态列表
			function loadStateList() {
				cart_list = '';
				balanceTotal = 0;
				$('#cart_list').empty();
				$.ajax({
				  type: "get",    // 接口类型
				  url: api + "miners/status",  // 接口地址
				  data: {},  // 参数
				  beforeSend: function(xhr) {
				    xhr.setRequestHeader('x-requested-with', store.get("userInfo").token); // 需要携带的头部
				  },
				  async: true,
				  success: function(ret) {
				    mui.hideLoading();
				    if(ret.success) {
				      mui.toast('加载成功');
				      stateList = ret.data.status; // 矿机状态列表
				      complete(); // 最终合成
//				      for(var b =0;b<stateList.length;b++){
//				      	balanceTotal = balanceTotal + stateList[b].balance;
//				      }
				      $('#balance').html(ret.data.totalBalance);
				      $('#balanceCNY').html(ret.data.totalBalance);
				    } else{
				      mui.toast(ret.msg);
				    }
				  },
				  error: function(error) {
				    mui.hideLoading();
				    mui.toast(error.responseJSON.msg);
				  }
				})
			}
			// 获取矿机列表
			function loadmillList() {
				$('#cart_list').empty();
				cart_list = '';
				mui.showLoading("加载中...", "div");
				$.ajax({
					type: "get",
					url: api + "miners?page=" + page + '&pageSize=' + pageSize,
					data: {},
					beforeSend: function(xhr) {
						xhr.setRequestHeader('x-requested-with', store.get("userInfo").token);
					},
					async: true,
					success: function(ret) {
						mui.hideLoading();
						if(ret.success) {
							mui.toast('加载成功');
							millList = ret.data; //矿机列表
//							if (millList.length < pageSize){
//								$('.loading').html('已加载全部');
//							} else {
//								$('.loading').html('加载更多');
//							}
//							console.log(millList.length);
							complete(); // 最终合成
							for(var b =0;b<millList.length;b++){
						      	balanceTotal += millList[b].balance;
						    }
							$('#balance').html(balanceTotal);
//				      		$('#balanceCNY').html(balanceTotal);
						} else {
							mui.toast(ret.msg);
						}
					},
					error: function(error) {
						mui.hideLoading();
						mui.toast(error.responseJSON.msg);
					}
				})
			};
			// 合并数据
//			function mergeDate(){
//				cart_list = '';
//				for(var i=0;i<millList.length;i++){
//					for (var j=0;j<stateList.length;j++){
//						if (i == j){
//							millList[i].stateData = stateList[j];
//						}
//					}
//				}
//				complete(); // 最终合成
//			};
			$("#cart_list").on("swipeleft", ".miner", function() {
				$(".miner_box").find(".delete_miner").css("right", "-85px")
				$(".miner_box").find(".miner").css("margin-left", "0")
				$(this).parent().find(".delete_miner").css("right", "0")
				$(this).parent().find(".miner").css("margin-left", "-85px")
			});
			$("#cart_list").on("swiperight", ".miner", function() {
				$(this).parent().find(".delete_miner").css("right", "-85px")
				$(this).parent().find(".miner").css("margin-left", "0")
			});
			// 合成页面
			function complete() {
				if(millList.list.length > 0) {
					$.each(millList.list, function(i, t) {
						//矿机状态值：
						//0 : 已发出【解绑矿机】指令
						//1 : 已收到【解绑矿机】指令
						//2 : 矿机已解绑（等同于未绑定、未启动）****
						//3 : 已发出【绑定矿机】指令
						//4 : 已收到【绑定矿机】指令
						//5 : 矿机已绑定（等同于未解绑、已启动）****
						//6 : 已发出【绑定账号】指令
						//7 : 已收到【绑定账号】指令
						//8 : 账号已绑定          ****
						//9 : 已发出【解绑账号】指令
						//10: 已收到【解绑账号】指令
						//11: 账号已解绑                     ****
						if (t.status == 5 || t.status == 11){
							cart_list +=
							'<div class="miner_box">' +
								'<div class="miner">' +
									'<div class="title">' +
										'<h5 class="name">' + t.name + '<i class="iconfont icon-xiugai1 alter_name" uuid="'+ t.uuid +'"></i>'+'</h5>' +
										'<p class="status" id="doing">' + 
											'<img src="../img/greenPic.png" alt="" />' +
											'空闲中' +
										'</p>' +
									'</div>' +
									'<div class="miner_content">' + 
									    '<img src="../img/ore/11.png" class="not_start_logo"/>' +
									    '<p class="not_start_title">您还未绑定钱包，绑定之后矿机将开始挖矿</p>' +
									'</div>' +
									'<div class="miner_footer_two">' +
										'<p class="purse" name="'+ t.name +'" uuid="'+ t.uuid +'">' +
											'<i style="left: 34%;" class="iconfont icon-qianbao" style="font-size: 16px;"></i>' + '绑定钱包' +
										'</p>' +
									'</div>' +
								'</div>' +
								'<div class="delete_miner" uuid="'+ t.uuid +'">' +
									'<i class="iconfont icon-shanchu"></i>' +
									'<p>' + '删除' + '</p>'+
								'</div>' +
							'</div>';
						} else if(t.status == 8){
							cart_list +=
							'<div class="miner_box">' +
								'<div class="miner">' +
									'<div class="title">' +
										'<h5 class="name">' + t.name + '<i class="iconfont icon-xiugai1 alter_name" uuid="'+ t.uuid +'"></i>'+'</h5>' +
										'<p class="status" id="doing">' + 
											'<img src="../img/greenPic.png" alt="" />' +
											'挖矿中' +
										'</p>' +
									'</div>' +
									'<div class="miner_content">' +
										'<ul class="miner_income">' +
											'<li>' +
												'<h6>' + '收益（DCAR/day）' + '</h6>' +
												'<p>' + t.balance + '</p>' +
											'</li>' +
											'<li>' +
												'<h6>' + '算力值（KH/S）' + '</h6>' +
												'<p>' + t.hashrate + '</p>' +
											'</li>' +
										'</ul>'+
									'</div>' +
									'<div class="miner_footer">' +
										'<p class="deleteWallet" uuid="'+ t.uuid +'">' +
											'<i class="iconfont icon-qianbao" style="font-size: 16px;"></i>' + '解绑钱包' +
										'</p>' +
										'<p class="seek_deatil" income="'+ t.balance +'" address="'+ t.address +'" name="'+ t.name +'" uuid="'+ t.uuid +'">' +
											'<i class="iconfont icon-xiangqing"></i>' + '查看详情' +
										'</p>' +
									'</div>' +
								'</div>' +
								'<div class="delete_miner" uuid="'+ t.uuid +'">' +
									'<i class="iconfont icon-shanchu"></i>' +
									'<p>' + '删除' + '</p>'+
								'</div>' +
							'</div>';
						}
//						if (t.uptime >0) {
//							cart_list +=
//							'<div class="miner_box">' +
//								'<div class="miner">';
//										if (t.address) {
//											cart_list +=
//											'<div class="title">' +
//												'<h5 class="name">' + t.name + '<i class="iconfont icon-xiugai1 alter_name" uuid="'+ t.uuid +'"></i>'+'</h5>' +
//												'<p class="status" id="doing">' + 
//													'<img src="../img/greenPic.png" alt="" />' +
//													'挖矿中' +
//												'</p>' +
//											'</div>' +
//											'<div class="miner_content">' +
//											'<ul class="miner_income">' +
//											'<li>' +
//												'<h6>' + '收益（DCAR/day）' + '</h6>' +
//												'<p>' + t.balance + '</p>' +
//											'</li>' +
//											'<li>' +
//												'<h6>' + '算力值（KH/S）' + '</h6>' +
//												'<p>' + t.hashrate + '</p>' +
//											'</li>' +
//										'</ul>'+
//											'</div>' +
//												'<div class="miner_footer">' +
//													'<p class="deleteWallet" uuid="'+ t.uuid +'">' +
//														'<i class="iconfont icon-qianbao" style="font-size: 16px;"></i>' + '解绑钱包' +
//													'</p>' +
//													'<p class="seek_deatil" income="'+ t.balance +'" address="'+ t.address +'" name="'+ t.name +'" uuid="'+ t.uuid +'">' +
//														'<i class="iconfont icon-xiangqing"></i>' + '查看详情' +
//													'</p>' +
//												'</div>' +
//											'</div>' +
//											'<div class="delete_miner" uuid="'+ t.uuid +'">' +
//												'<i class="iconfont icon-shanchu"></i>' +
//												'<p>' + '删除' + '</p>'+
//											'</div>' +
//										'</div>'
//										} else{
//											cart_list +=
//												'<div class="title">' +
//													'<h5 class="name">' + t.name + '<i class="iconfont icon-xiugai1 alter_name" uuid="'+ t.uuid +'"></i>'+'</h5>' +
//													'<p class="status" id="staying">' + 
//														'<img src="../img/yellowPic.png" alt="" />' +
//														'空闲中' +
//													'</p>' +
//												'</div>' +
//												'<div class="miner_content">' + 
//												    '<img src="../img/ore/11.png" class="not_start_logo"/>' +
//												    '<p class="not_start_title">您还未绑定钱包，绑定之后矿机将开始挖矿</p>' +
//												'</div>' +
//													'<div class="miner_footer_two">' +
//														'<p class="purse" name="'+ t.name +'" uuid="'+ t.uuid +'">' +
//															'<i style="left: 34%;" class="iconfont icon-qianbao" style="font-size: 16px;"></i>' + '绑定钱包' +
//														'</p>' +
//													'</div>' +
//												'</div>' +
//											'<div class="delete_miner" uuid="'+ t.uuid +'">' +
//												'<i class="iconfont icon-shanchu"></i>' +
//												'<p>' + '删除' + '</p>'+
//											'</div>' +
//										'</div>'
//										}
//						} else {
//							cart_list +=
//							'<div class="miner_box">' +
//								'<div class="miner">';
//							if (t.isEntity){
//								cart_list +=
//									'<div class="title">' +
//										'<h5 class="name">' + t.name + '<i class="iconfont icon-xiugai1 alter_name" uuid="'+ t.uuid +'"></i>'+ '</h5>' +
//										'<p class="status" id="staying">' + 
//											'<img src="../img/redPic.png" alt="" />' +
//											'关机' +
//										'</p>' +
//									'</div>' +  
//									
//									'<div class="miner_content">' + 
//									    '<img src="../img/ore/12.png" class="not_start_logo"/>' +
//									    '<p class="not_start_title">您所绑定的矿机处于离线，请启动矿机并接入网络</p>' +
//									'</div>' +
//									'<div class="miner_footer_two">'+
//										'<p class="start_open open_box" uuid="'+ t.uuid +'">'+
//											'<i class="iconfont icon-guanjin"></i>' + '启动矿机' +
//										'</p>'+
//									'</div>'+
//								'</div>';
//							} else {
//								cart_list +=
//								'<div class="title">' +
//									'<h5 class="name">' + t.name + '<i class="iconfont icon-xiugai1 alter_name" uuid="'+ t.uuid +'"></i>'+ '</h5>' +
//									'<p class="status" id="staying">' + 
//										'<img src="../img/redPic.png" alt="" />' +
//										'关机' +
//									'</p>' +
//								'</div>' +
//								'<div class="miner_content">' + 
//								    '<img src="../img/ore/13.png" class="not_start_logo"/>' +
//								    '<p class="not_start_title">您所绑定的是托管矿机，首次使用需要初始化</p>' +
//								'</div>' +
//									'<div class="miner_footer_two">' +
//										'<p class="initialize start_open" name="'+ t.name +'" uuid="'+ t.uuid +'">' +
//											'<i style="left: 34%;" class="iconfont icon-weibiaoti-zhuanhuan" style="font-size: 16px;"></i>' + '初始化矿机' +
//										'</p>' +
//									'</div>' +
//								'</div>';
//							}
//							cart_list +=
//								'<div class="delete_miner low_height" uuid="'+ t.uuid +'">' +
//									'<i class="iconfont icon-shanchu"></i>' +
//									'<p>' + '删除' + '</p>'+
//								'</div>' +
//							'</div>'
//						}
					});
					$('#cart_list').html(cart_list);
				}
				if ($(".miner_box").length >= millList.count){
					$('.loading').html('已加载全部');
				} else {
					$('.loading').html('加载更多');
				}
			}
		
		</script>
	</body>

</html>