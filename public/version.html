<!doctype html>
<html>

	<head>
		<meta charset="UTF-8">
		<title>版本详情</title>
		<meta name="viewport" content="width=device-width,initial-scale=1,minimum-scale=1,maximum-scale=1,user-scalable=no" />
		<link href="../css/mui.min.css" rel="stylesheet" />
		<link rel="stylesheet" type="text/css" href="../css/iconfont.css"/>
		<link rel="stylesheet" type="text/css" href="../css/style.css" />
		<link rel="stylesheet" type="text/css" href="../css/version.css"/>
	</head>

	<body>
		<header class="mui-bar mui-bar-nav">
			<a class="mui-action-back mui-icon mui-icon-left-nav mui-pull-left"></a>
			<h1 class="mui-title account_title">版本详情</h1>
		</header>
		<div class="mui-content between">
			<div class="logo">
				<i class="iconfont icon-shezhigengxin"></i>
				<p>版本 : 1.0.0</p>
			</div>
			<p class="introduce" id="versionInfo">啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊</p>
			<!--<p class="introduce newest">
				<span>您当前已是最新版本</span>
			</p>-->
			<button type="button" id="download" class="mui-btn mui-btn-primary">下载并安装</button>
		</div>
		<script src="../js/mui.min.js"></script>
		<script src="../js/markdown.js"></script>
		<script src="../js/common.js" type="text/javascript" charset="utf-8"></script>
		<script src="../js/benben.js" type="text/javascript" charset="utf-8"></script>
		<script src="../js/jquery-2.1.1.min.js"></script>
		<script type="text/javascript">
			mui.showLoading("加载中...", "div");
			$.ajax({
				type: "get",
				url: api + "dcarapp/latest",
				data: {},
				async: true,
				success: function(ret) {
					mui.hideLoading();
					alert(ret.data.version)
					if(ret.success) {
						// alert(ret.data.version)
					} else {
						mui.toast(ret.msg)
					}
				},
				error: function(error) {
					mui.hideLoading();
					mui.toast(error.responseJSON.msg);
				}
			});
			$("#download").on("click", function(){
				final Intent intent = new Intent();
				intent.setAction(Intent.ACTION_VIEW);、intent.setData(Uri.parse("http://www.baidu.com"));
				// 注意此处的判断intent.resolveActivity()可以返回显示该Intent的Activity对应的组件名
				// 官方解释 : Name of the component implementing an activity that can display the intent
				if (intent.resolveActivity(getPackageManager()) != null) {    
				  final ComponentName componentName = intent.resolveActivity(getPackageManager()); 
				  // 打印Log   ComponentName到底是什么
				  Log.e(TAG, "componentName = " + componentName.getClassName());
				  startActivity(Intent.createChooser(intent, "请选择浏览器"));
				} else {    
				  Toast.makeText(getApplicationContext(), "没有匹配的程序", Toast.LENGTH_SHORT).show();
				}
			})
			// $('#versionInfo').html(markdown.toHTML(ret.data.content));
		</script>
	</body>

</html>